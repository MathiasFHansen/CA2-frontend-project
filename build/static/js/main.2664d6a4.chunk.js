(this["webpackJsonpca-react"]=this["webpackJsonpca-react"]||[]).push([[0],{21:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(14),a=c.n(r),o=(c(21),c(3)),j=(c.p,c(22),c(23),c(8)),i=c(11),l=c(0);function u(e){var t=e.facade,c=e.setLoggedIn,s=e.setErrorMessage,r=e.logout,a=e.loggedIn,u={username:"",password:""},b=Object(n.useState)(u),d=Object(o.a)(b,2),h=d[0],O=d[1],f=function(e){O(Object(i.a)(Object(i.a)({},h),{},Object(j.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{class:"text-center",children:[Object(l.jsx)("h2",{children:"Home"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(h),t.login(h.username,h.password,c,s),console.log(s),O(u)},children:[Object(l.jsxs)("label",{children:["User Name:",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",name:"username",value:h.username,onChange:f}),Object(l.jsx)("br",{}),"Password:",Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",name:"password",value:h.password,onChange:f})]}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",class:"btn btn-primary",children:"Login"}),t.hasUserAccess("user",a)&&Object(l.jsx)("button",{class:"btn btn-primary",onClick:r,children:"Logout"}),t.hasUserAccess("admin",a)&&Object(l.jsx)("button",{class:"btn btn-primary",onClick:r,children:"Logout"}),Object(l.jsxs)("p",{children:["Role: ",t.getUserRoles()]})]})]})}var b=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Bored?"}),Object(l.jsx)("p",{children:e.activity}),Object(l.jsx)("p",{children:e.type})]})},d=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Cat"}),Object(l.jsx)("p",{children:e.fact})]})},h=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Dog"}),Object(l.jsx)("p",{children:e.message})]})};var O=function(e){var t=Object(n.useState)(""),c=Object(o.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)(""),j=Object(o.a)(a,2),i=j[0],u=j[1],b=Object(n.useState)(""),d=Object(o.a)(b,2),h=d[0],O=d[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Genderize"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://api.genderize.io/?name="+s).then((function(e){return e.json()})).then((function(e){console.log(e),u(e.gender),O(e.probability)}))},children:[Object(l.jsxs)("label",{children:["Name:",Object(l.jsx)("input",{type:"text",name:"name",value:s,onChange:function(e){console.log(e.target.value),r(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",children:"Submit"})]}),Object(l.jsx)("p",{children:s}),Object(l.jsx)("p",{children:i}),Object(l.jsx)("p",{children:h})]})},f=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"GeekJoke"}),Object(l.jsx)("p",{children:e.joke})]})},x=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"RandomFact"}),Object(l.jsx)("p",{children:e.text})]})},g="http://localhost:8080/ca2_backend_project_";function p(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var m=function(){var e=function(e){localStorage.setItem("jwtToken",e)},t=function(){return localStorage.getItem("jwtToken")},c=function(){var e=null!=t();return e},n=function(){if(null!=t()){var e=t().split(".")[1];return JSON.parse(window.atob(e)).roles}return""},s=function(e,n,s){var r={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return n&&c()&&(r.headers["x-access-token"]=t()),s&&(r.body=JSON.stringify(s)),r};return{makeOptions:s,fetchData:function(e,t,c){var n=s("GET",!0);return fetch(g+"/api/"+e,n).then(p).then((function(e){return t(e)})).catch((function(e){e.status?(console.log(e),e.fullError.then((function(e){return c(e.code+": "+e.message)}))):c("Network error")}))},setToken:e,getToken:t,loggedIn:c,login:function(t,c,n,r){var a=s("POST",!0,{username:t,password:c});return fetch(g+"/api/login",a).then(p).then((function(t){e(t.token),n(!0),r("Logged in")})).catch((function(e){e.status?e.fullError.then((function(e){return r(e.code+": "+e.message)})):r("Network error")}))},logout:function(){localStorage.removeItem("jwtToken")},getUserRoles:n,hasUserAccess:function(e,t){var c=n().split(",");return t&&c.includes(e)}}}(),v=c(6),k=c(2);function S(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),a=Object(o.a)(r,2),j=a[0],i=a[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),S=p[0],y=p[1],w=Object(n.useState)(""),C=Object(o.a)(w,2),N=C[0],E=C[1],I=Object(n.useState)(""),L=Object(o.a)(I,2),T=L[0],F=L[1],J=Object(n.useState)(""),U=Object(o.a)(J,2),A=U[0],D=U[1],G=Object(n.useState)(!1),z=Object(o.a)(G,2),P=z[0],R=z[1],B=Object(n.useState)("All is good ... so far"),M=Object(o.a)(B,2),_=(M[0],M[1]);return Object(n.useEffect)((function(){fetch("https://www.boredapi.com/api/activity").then((function(e){return e.json()})).then((function(e){return s(e.activity),i(e.type)}))}),[]),Object(n.useEffect)((function(){fetch("https://catfact.ninja/fact").then((function(e){return e.json()})).then((function(e){return y(e.fact)}))}),[]),Object(n.useEffect)((function(){fetch("https://dog.ceo/api/breeds/image/random").then((function(e){return e.json()})).then((function(e){return E(e.message)}))}),[]),Object(n.useEffect)((function(){fetch("https://geek-jokes.sameerkumar.website/api?format=json").then((function(e){return e.json()})).then((function(e){return F(e.joke)}))}),[]),Object(n.useEffect)((function(){fetch("https://uselessfacts.jsph.pl/random.json?language=en").then((function(e){return e.json()})).then((function(e){return D(e.text)}))}),[]),Object(l.jsx)(v.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("ul",{className:"header",children:[Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/bored",children:"Bored"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/cat",children:"Cat"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/dog",children:"Dog"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/genderize",children:"Genderize"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/GeekJoke",children:"GeekJoke"})}),Object(l.jsx)("li",{children:Object(l.jsx)(v.b,{exact:!0,activeClassName:"selected",to:"/randomFact",children:"RandomFact"})})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(k.c,{children:[Object(l.jsx)(k.a,{exact:!0,path:"/",children:Object(l.jsx)(u,{logout:function(){m.logout(),R(!1),_("Logged out.")},loggedIn:P,setLoggedIn:R,facade:m,setErrorMessage:_})}),Object(l.jsx)(k.a,{path:"/bored",children:m.hasUserAccess("user",P)&&Object(l.jsx)(b,{facade:m,setErrorMessage:_,activity:c,type:j})}),Object(l.jsx)(k.a,{path:"/cat",children:Object(l.jsx)(d,{fact:S})}),Object(l.jsx)(k.a,{path:"/dog",children:Object(l.jsx)(h,{message:N})}),Object(l.jsx)(k.a,{path:"/genderize",children:Object(l.jsx)(O,{})}),Object(l.jsx)(k.a,{path:"/geekJoke",children:Object(l.jsx)(f,{joke:T})}),Object(l.jsx)(k.a,{path:"/randomFact",children:Object(l.jsx)(x,{text:A})})]})})]})})}var y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root")),y()}},[[33,1,2]]]);
//# sourceMappingURL=main.2664d6a4.chunk.js.map